<template>
    <require from="../../resources/value-converters/date-formatter/date-formatter"></require>
    <require from="../../resources/value-converters/limitTo/limitTo"></require>

    <div class="projects-list col-xs-12">
        <select class="form-control" value.bind="selectFilter">
            <option value="">All</option>
            <option repeat.for="status of statusList" value="${status.id}">${status.name}</option>
        </select>
        <section repeat.for="item of projectList | limitTo:projectList.length " class="${item.id}"
                 if.bind="((selectFilter === '' || item.id === selectFilter) && item.list.length)">
            <h3 class="row">${item.status} (${item.list.length})</h3>
            <ul>
                <li repeat.for="project of item.list">
                    <span class="date">${project.createdAt | dateFormatter}</span>
                    <span class="name" click.delegate="goToProject(project.id)"><i class="material-icons">fiber_manual_record</i>${project.name}</span>
                    <a route-href="route:client;  params.bind:{id:project.client.id}">${project.client.firstName}
                        ${project.client.lastName}</a>
                </li>
            </ul>
        </section>
        <button class="add-project" if.bind="user.type === 'client'" click.delegate="showModal()">
            <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
    </div>
    <dialog class="dialog" click.delegate="hideModal()">
        <span>Create New Job</span>
        <button class="add-project" click.delegate="goToCreateJob()"><i class="fa fa-plus" aria-hidden="true"></i></button>
    </dialog>
</template>