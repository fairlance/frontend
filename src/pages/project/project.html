<template>
    <require from="../../resources/custom-elements/message/message.html"></require>
    <require from="../../resources/value-converters/project-status/project-status"></require>
    <require from="../../resources/value-converters/date-formatter/date-formatter"></require>

    <div id="slidemenu">
        <div class="panel-body">
            <div class="chat">
                <message repeat.for="i of messages.length" content="${messages[i].text}"
                         username="${messages[i].username}" side="${messages[i].side}"
                         avatar="${messages[i].avatar}"></message>
            </div>
        </div>
        <div class="panel-footer">
            <div class="input-group">
                <form submit.delegate="doSend(message)" autocomplete="off">
                    <input id="btn-input" type="text" value.bind="message" class="form-control input-sm"
                           placeholder="Type your message here..."/>
                    <div class="input-group-btn">
                        <button class="btn btn-warning btn-sm" id="btn-chat">
                            Send
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--wrap the page content do not style this-->
    <div id="page-content">

        <div class="container">
            <h1 class="">
                <i class="material-icons ${project.status}">fiber_manual_record</i>
                ${project.name}
            </h1>
            <a class="client-name" route-href="route:client;  params.bind:{id:project.client.id}">${project.client.firstName} ${project.client.lastName}</a>
            <section class="project-header">
                <h1 class="${project.status}">
                    ${project.status | projectStatus}
                    <i class="material-icons">chevron_left</i>
                </h1>
                <p>Deadline: ${project.deadline | dateFormatter}</p>
            </section>
            <section class="section">
                <a click.delegate="toggleSection('showProposal')">
                    <i class="material-icons">chevron_right</i>
                    Brief/Proposal
                </a>
                <article if.bind="showProposal">
                    ${project.description}
                </article>
            </section>
            <section class="section">
                <a click.delegate="toggleSection('showContract')">
                    <i class="material-icons">chevron_right</i>
                    Contract
                </a>
                <!--if.bind="showContract"-->
                <article if.bind="showContract" class="contract">
                    <p>
                        Initial Agreement
                        <span>${project.createdAt | dateFormatter}</span>
                    </p>
                    <div>
                        <label>Hours Asigned</label>
                        <i click.delegate="approveContractArticle($event)" class="icon-check_empty-1"></i>
                        <input value="${project.hours}h">
                    </div>
                    <div >
                        <label>Hourly Rate</label>
                        <i click.delegate="approveContractArticle($event)" class="icon-check_empty-1"></i>
                        <i class="material-icons">euro_symbol</i>
                        <input value="${project.perHour}">
                    </div>
                    <div>
                        <label>Deadline Agreed</label>
                        <i click.delegate="approveContractArticle($event)" class="icon-check_empty-1"></i>
                        <span>${project.deadline | dateFormatter}</span>
                        <!--<i class="material-icons deadline">date_range</i>-->
                    </div>
                    <div>
                        <label>Deadline Flexibility</label>
                        <i click.delegate="approveContractArticle($event)" class="icon-check_empty-1"></i>
                        <input value="${project.deadlineFlexibility} d">
                    </div>
                    <button click.delegate="contractAgreed()">I Agree</button>
                    <a class="full-contract">Read Full Contract</a>

                </article>
            </section>
            <section class="section">
                <a click.delegate="toggleSection('showFiles')">
                    <i class="material-icons">chevron_right</i>
                    Files
                </a>
                <article if.bind="showFiles">
                    <p class="image-upload" if.bind="files.length">
                        <img src="${uploadUrl}/file/${files[0].name}">
                        <span>${files[0].name}</span>
                    </p>
                </article>
            </section>
            <div class="row function-buttons">
                <button click.delegate="toggleMenu()">Toggle</button>
                <label class="btn btn-default btn-file">
                    Upload file <input type="file" class="hidden" change.delegate="uploadFile()" files.bind="files">
                </label>
            </div>
        </div>
    </div>
    <!-- /#page-content -->
</template>
