<template>
    <require from="navigation.html"></require>
    <require from="date-formatter"></require>

    <navigation user.bind="user"></navigation>
    <div class="job-apply" if.bind="!application">
        <a route-href="route:client;  params.bind:{id:details.client.id}">
            ${details.client.firstName} ${details.client.lastName}
        </a>
        <span class="rating">
            <i class="material-icons">star</i>
            ${details.client.rating}
        </span>
        <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect au-target" mdl="button"
                click.delegate="showApplication()">
            Apply
        </button>
    </div>
    <div class="mdl-layout__container">
        <div mdl="layout" class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
            <main class="job mdl-layout__content">
                <div class="job-details" if.bind="!application">
                    <div class="heading clearfix">
                        <h2>${details.name}</h2>
                        <span class="date">
                        ${details.createdAt | dateFormatter}
                        <i class="material-icons">flag</i>
                    </span>
                        <div class="info">
                            <span class="budget">$ 200-$ 450</span>
                            <span class="time">2 Days Left</span>
                            <span class="proposals">17 Proposals</span>
                        </div>
                    </div>
                    <div class="content">
                        <h3>Summary</h3>
                        <p>${details.summary}</p>
                        <h3>Details</h3>
                        <p>${details.details}
                        </p>
                        <h3>Links</h3>
                        <p if.bind="details.links.length">
                            <a repeat.for="link of details.links">${link.link}</a>
                        </p>
                        <h3>Attachments</h3>
                        <p>To be done</p>

                    </div>
                </div>
                <div class="job-application" if.bind="application">
                    <div mdl="textfield" class="mdl-textfield mdl-js-textfield">
                        <textarea class="mdl-textfield__input" type="text" rows="9" id="description"
                                  value.bind="description"></textarea>
                        <label class="mdl-textfield__label" for="description">Text lines...</label>
                    </div>
                    <div class="work-samples dropdown">
                        <span>Work samples</span>
                        <div class="mdl-layout-spacer"></div>
                        <button id="accbtn" mdl="button" class="mdl-js-ripple-effect mdl-button--icon">
                            <i class="material-icons">add_circle_outline</i>
                        </button>
                        <ul mdl="menu" class="mdl-menu--bottom-right mdl-js-ripple-effect" for="accbtn">
                            <li class="mdl-menu__item" repeat.for="reference of user.data.references">
                                <a click.delegate="selectReference(reference)">
                                    <i class="material-icons" if.bind="reference.selected">check</i>${reference.title}
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div mdl="textfield" class="mdl-textfield mdl-js-textfield">
                        <input class="mdl-textfield__input" value.bind="budget" type="text" id="lastName"
                               pattern="[0-9]+" required="required">
                        <label class="mdl-textfield__label" for="lastName">Budget etimate</label>
                        <span class="mdl-textfield__error">Must be a number</span>
                    </div>
                    <section class="time-frame clearfix">
                        <span>Delivery estimate:</span>
                        <label repeat.for="period of periodOptions" mdl="radio"
                               class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="radio + ${period.value}">
                            <input checked class="mdl-radio__button" id="radio + ${period.value}" name="flash"
                                   type="radio" model.bind="period" checked.bind="$parent.period">
                            <span class="mdl-radio__label">${period.name}</span>
                        </label>
                    </section>
                    <p>
                        <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect au-target"
                                mdl="button" click.delegate="preview()">
                            Preview
                        </button>
                        <button type="button" class="mdl-button mdl-js-button mdl-js-ripple-effect au-target"
                                mdl="button" click.delegate="discard()">
                            Discard
                        </button>
                    </p>

                </div>
            </main>
        </div>
    </div>
</template>