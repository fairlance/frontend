<template>
    <require from="../../components/navigation/navigation"></require>
    <require from="../../resources/value-converters/limitTo/limitTo"></require>

    <navigation user.bind="user"></navigation>
    <div class="apply container">
        <div if.bind="!view">
            <section>
                <h2>Brief Introduction</h2>
                <textarea placeholder="Describe yourself here..." value.bind="intro"></textarea>
            </section>
            <section class="attachments">
                <h2>Attach Files</h2>
                <label class="btn btn-default btn-file button upload">
                    <i class="material-icons">cloud_upload</i>
                    <input type="file" class="hidden" change.delegate="uploadFile()" files.bind="files">
                </label>
                <div class="row">
                    <section class="col-xs-6" repeat.for="attachment of attachments  | limitTo:attachments.length">
                        <img src="${uploadUrl + 'file/' + attachment.name}">
                        <div class="review-desc">
                            <div>
                                <h4>${attachment.name}</h4>
                            </div>
                        </div>
                    </section>
                </div>

            </section>
            <section>
                <h2>Examples on Web</h2>
                <button class="button upload"  click.delegate="addExample()"><i class="material-icons">note_add</i></button>
                <form class="example-form">
                    <label>Link:</label>
                    <input placeholder="https://www.behance.net" type="text" required value.bind="url">
                    <label>Brief description:</label>
                    <textarea required placeholder="That dance or sing to MTV-like commercials..." value.bind="desc"></textarea>
                </form>

                <div class="link clearfix" repeat.for="example of links  | limitTo:links.length">
                    <a href="${example.url}" target="_blank">${example.url}</a>
                    <p>
                        <strong>Note about the link: </strong>
                        ${example.description}
                    </p>
                </div>
            </section>
        </div>
        <div if.bind="view">
            <section>
                <h2>Brief Introduction</h2>
                <article>${intro}</article>
            </section>
            <section class="attachments">
                <h2 class="special">Attachments</h2>
                <div class="row">
                    <section class="col-xs-6" repeat.for="attachment of attachments">
                        <img src="${uploadUrl + 'file/' + attachment.name}">
                        <div class="review-desc">
                            <div>
                                <h4>${attachment.name}</h4>
                            </div>
                        </div>
                    </section>
                </div>

            </section>
            <section>
                <h2>Examples on Web</h2>
                <div class="link" repeat.for="example of links | limitTo:links.length">
                    <a href="${example.url}" target="_blank">${example.url}</a>
                    <p>
                        <strong>Note about the link: </strong>
                        ${example.description}
                    </p>
                </div>
            </section>
        </div>

        <section class="clearfix button-container" if.bind="submitButton">
            <button class="btn btn-default" click.delegate="preview()">Preview</button>
            <button class="btn btn-default submit" click.delegate="submit()">Submit</button>
            <button class="btn btn-info discard">Back</button>
            <div class="background"></div>
        </section>
        <section class="clearfix button-container" if.bind="!submitButton">
            <button class="btn btn-default discard" >Dismiss</button>
            <button class="btn btn-default" click.delegate="proceed()">Proceed</button>
            <div class="background"></div>
        </section>
    </div>
</template>